# üß† Smart Q&A Service (RAG with Llama-3)

This project is a complete web service (API) that provides answers to user questions based on a predefined knowledge base. It leverages a modern RAG (Retrieval-Augmented Generation) architecture, using powerful sentence embeddings for retrieval and the Llama-3 language model for generation.

The service is built with **FastAPI** and follows a standard, production-ready microservice structure.

## ‚ú® Features

- **Powerful RAG Core:** Retrieves relevant information using semantic search (Sentence Transformers) and generates accurate answers with Llama-3.
- **Automated Tagging:** Capable of automatically identifying and categorizing user queries.
- **Professional Architecture:** Clean, modular, and scalable code with a clear separation of concerns.
- **Automatic API Docs:** Interactive API documentation is automatically generated by FastAPI at the `/docs` endpoint.
- **Secure & Production-Ready:** Uses environment variables to securely manage API keys and is ready for deployment.

## üöÄ Getting Started

Follow these steps to set up and run the project locally.

### Prerequisites

- Python 3.9+
- Git

### 1. Clone the Repository

First, clone the project from GitHub to your local machine:
```bash
git clone https://github.com/YOUR_USERNAME/YOUR_REPOSITORY_NAME.git
cd YOUR_REPOSITORY_NAME
```
(Replace `YOUR_USERNAME` and `YOUR_REPOSITORY_NAME` with your actual GitHub details.)

### 2. Create and Activate a Virtual Environment

It is highly recommended to use a virtual environment to manage project dependencies.

```bash
# Create a virtual environment
python -m venv .venv

# Activate on Windows
.\.venv\Scripts\Activate

# Activate on macOS/Linux
# source .venv/bin/activate
```

### 3. Install Dependencies

Install all required Python packages from the `requirements.txt` file.

```bash
pip install -r requirements.txt
```

### 4. Build the Knowledge Base (One-Time Setup)

The service relies on a `vector_store.json` file to function. This file acts as the vector database for your knowledge. To build it, you first need to prepare your source data and then run the data preparation scripts in order.

_Note: You must have these data preparation scripts (e.g., `exelMK.py`, `TagVDB.py`, `toVDB.py`) in your project for this step. These are **offline tools** and not part of the running service._

```bash
# Example steps to generate the vector store
python exelMK.py
python TagVDB.py
python toVDB.py
```
After successful execution, a `vector_store.json` file will be created in the project root.

### 5. Configure Your API Key

Create a `.env` file in the root of the project to securely store your API key.

1.  Create the file:
    ```
    # In your terminal
    # On macOS/Linux: touch .env
    # On Windows: echo. > .env
    ```
2.  Add your API key to the `.env` file:
    ```
    TOGETHER_API_KEY="YOUR_API_KEY_HERE"
    ```
    The application will automatically load this variable on startup. This file is already listed in `.gitignore` and will not be committed to GitHub.

### 6. Run the Server

Start the API server using Uvicorn:
```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000
```
Your server is now running and accessible at `http://127.0.0.1:8000`.

## ‚öôÔ∏è How to Use the API

To ask a question, send a `POST` request to the following endpoint:

`http://127.0.0.1:8000/api/v1/qna`

### Request

The request body must be a JSON object with a `query` key.

- **Content-Type:** `application/json`
- **Body:**
  ```json
  {
    "query": "Your question goes here"
  }
  ```

### Example with `curl`

```bash
curl -X POST \
  -H "Content-Type: application/json" \
  -d '{"query": "How are trip costs calculated in Tapsi?"}' \
  http://127.0.0.1:8000/api/v1/qna
```

### Response

The API will return a JSON object with the generated answer and additional metadata.

```json
{
  "tags_identified": [
    "Sales and Pricing"
  ],
  "final_answer": "The price in Tapsi is calculated dynamically and in real-time based on route traffic, distance traveled, vehicle depreciation, and the likelihood of finding a driver.",
  "retrieved_context_count": 1
}
```

## üìö Interactive Documentation

For a user-friendly way to explore and test the API, open your web browser and navigate to:

`http://127.0.0.1:8000/docs`

This will open the automatic Swagger UI documentation, where you can see all available endpoints and test them directly from your browser.